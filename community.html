
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Single Model API &#8212; version 0.29.3</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Growth rates and fluxes" href="growth_fluxes.html" />
    <link rel="prev" title="Writing your own workflows" href="workflows.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/micom.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">version 0.29.3</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="logic.html">
   Methods used by MICOM
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="installing.html">
   Installing MICOM
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="high_level.html">
   MICOM workflows
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="viz.html">
   Visualizations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="workflows.html">
   Writing your own workflows
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Single Model API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="growth_fluxes.html">
   Growth rates and fluxes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="media.html">
   Growth media
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="taxa_knockouts.html">
   Knockouts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="elasticities.html">
   Intervention studies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tutorials.html">
   Tutorials and Courses
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="NEWS.html">
   Release Notes
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="autoapi/index.html">
   API Reference
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="autoapi/micom/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       micom
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/data/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.data
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="autoapi/micom/viz/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.viz
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
      <label for="toctree-checkbox-3">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="autoapi/micom/viz/core/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           micom.viz.core
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="autoapi/micom/viz/exchanges/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           micom.viz.exchanges
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="autoapi/micom/viz/growth/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           micom.viz.growth
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="autoapi/micom/viz/prediction/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           micom.viz.prediction
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="autoapi/micom/viz/tradeoff/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           micom.viz.tradeoff
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="autoapi/micom/workflows/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.workflows
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
      <label for="toctree-checkbox-4">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="autoapi/micom/workflows/build/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           micom.workflows.build
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="autoapi/micom/workflows/core/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           micom.workflows.core
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="autoapi/micom/workflows/db_media/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           micom.workflows.db_media
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="autoapi/micom/workflows/grow/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           micom.workflows.grow
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="autoapi/micom/workflows/media/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           micom.workflows.media
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="autoapi/micom/workflows/tradeoff/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           micom.workflows.tradeoff
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/algorithms/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.algorithms
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/annotation/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.annotation
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/community/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.community
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/db/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.db
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/deps/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.deps
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/duality/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.duality
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/elasticity/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.elasticity
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/logger/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.logger
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/measures/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.measures
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/media/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.media
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/optcom/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.optcom
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/problems/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.problems
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/qiime_formats/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.qiime_formats
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/solution/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.solution
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/stats/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.stats
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/taxonomy/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.taxonomy
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="autoapi/micom/util/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         micom.util
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/community.ipynb.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Building-communities">
   Building communities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Saving-and-loading-communities">
   Saving and loading communities
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Single Model API</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Building-communities">
   Building communities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Saving-and-loading-communities">
   Saving and loading communities
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<section id="Single-Model-API">
<h1>Single Model API<a class="headerlink" href="#Single-Model-API" title="Permalink to this headline">#</a></h1>
<section id="Building-communities">
<h2>Building communities<a class="headerlink" href="#Building-communities" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">micom</span></code> will construct communities from a specification via a Pandas DataFrame. Here, the DataFrame needs at least two columns: “id” and “file” which specify the ID of the organism/tissue and a file containing the actual individual model.</p>
<p>To make more sense of that we can look at a small example. <code class="docutils literal notranslate"><span class="pre">micom</span></code> comes with a function that generates a simple example community specification consisting of several copies of a small <em>E. coli</em> model containing only the central carbon metabolism.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from micom.data import test_taxonomy

taxonomy = test_taxonomy()
taxonomy
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>genus</th>
      <th>species</th>
      <th>reactions</th>
      <th>metabolites</th>
      <th>file</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Escherichia_coli_1</td>
      <td>Escherichia</td>
      <td>Escherichia coli</td>
      <td>95</td>
      <td>72</td>
      <td>/home/cdiener/code/micom/micom/data/e_coli_cor...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Escherichia_coli_2</td>
      <td>Escherichia</td>
      <td>Escherichia coli</td>
      <td>95</td>
      <td>72</td>
      <td>/home/cdiener/code/micom/micom/data/e_coli_cor...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Escherichia_coli_3</td>
      <td>Escherichia</td>
      <td>Escherichia coli</td>
      <td>95</td>
      <td>72</td>
      <td>/home/cdiener/code/micom/micom/data/e_coli_cor...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Escherichia_coli_4</td>
      <td>Escherichia</td>
      <td>Escherichia coli</td>
      <td>95</td>
      <td>72</td>
      <td>/home/cdiener/code/micom/micom/data/e_coli_cor...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>As we see this specification contains the required fields and some more information. In fact the specification may contain any number of additional information which will be saved along with the community model. One special example is “abundance” which we will get to know soon :) The logic behind requiring the community information in this table format is that this table can be appended as supplement to your project or publication as is and describes your community composition without any doubt.</p>
<p>In order to convert the specification in a community model we will use the <code class="docutils literal notranslate"><span class="pre">Community</span></code> class from <code class="docutils literal notranslate"><span class="pre">micom</span></code> which derives from the cobrapy <code class="docutils literal notranslate"><span class="pre">Model</span></code> class.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from micom import Community

com = Community(taxonomy)
print(&quot;Build a community with a total of {} reactions.&quot;.format(len(com.reactions)))
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "f8eff43e337d440fa048416040171fed", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

Build a community with a total of 400 reactions.
</pre></div></div>
</div>
<p>This includes the correctly scaled exchange reactions with the internal medium and initializes the external imports to the maximum found in all models. The original taxonomy is maintained in the <code class="docutils literal notranslate"><span class="pre">com.taxonomy</span></code> attribute.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">micom</span></code> can figure out how to read a variety of different file types based on the extension. It curently supports:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.pickle</span></code> for pickled models</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.xml</span></code> or <code class="docutils literal notranslate"><span class="pre">.gz</span></code> for XML models</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.json</span></code> for JSON models</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.mat</span></code> for COBRAtoolbox models</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>com.taxonomy
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>genus</th>
      <th>species</th>
      <th>reactions</th>
      <th>metabolites</th>
      <th>file</th>
      <th>abundance</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Escherichia_coli_1</th>
      <td>Escherichia_coli_1</td>
      <td>Escherichia</td>
      <td>Escherichia coli</td>
      <td>95</td>
      <td>72</td>
      <td>/home/cdiener/code/micom/micom/data/e_coli_cor...</td>
      <td>0.25</td>
    </tr>
    <tr>
      <th>Escherichia_coli_2</th>
      <td>Escherichia_coli_2</td>
      <td>Escherichia</td>
      <td>Escherichia coli</td>
      <td>95</td>
      <td>72</td>
      <td>/home/cdiener/code/micom/micom/data/e_coli_cor...</td>
      <td>0.25</td>
    </tr>
    <tr>
      <th>Escherichia_coli_3</th>
      <td>Escherichia_coli_3</td>
      <td>Escherichia</td>
      <td>Escherichia coli</td>
      <td>95</td>
      <td>72</td>
      <td>/home/cdiener/code/micom/micom/data/e_coli_cor...</td>
      <td>0.25</td>
    </tr>
    <tr>
      <th>Escherichia_coli_4</th>
      <td>Escherichia_coli_4</td>
      <td>Escherichia</td>
      <td>Escherichia coli</td>
      <td>95</td>
      <td>72</td>
      <td>/home/cdiener/code/micom/micom/data/e_coli_cor...</td>
      <td>0.25</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>As you can notice we have gained a new column called <code class="docutils literal notranslate"><span class="pre">abundance</span></code>. This column quantifies the relative quantity of each individual in the community. Since we did not specify this in the original taxonomy <code class="docutils literal notranslate"><span class="pre">micom</span></code> assumes that all individuals are present in the same quantity.</p>
<p>The presented community here is pretty simplistic. For microbial communities <code class="docutils literal notranslate"><span class="pre">micom</span></code> includes a larger taxonomy for 773 microbial species from the <a class="reference external" href="https://doi.org/10.1038/nbt.3703">AGORA paper</a>. Here the “file” column only contains the base names for the files but you can easily prepend any path as demonstrated in the following:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from micom.data import agora

tax = agora.copy()
tax.file = &quot;models/&quot; + tax.file  # assuming you have downloaded the AGORA models to the &quot;models&quot; folder
tax.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>organism</th>
      <th>seedid</th>
      <th>kingdom</th>
      <th>phylum</th>
      <th>mclass</th>
      <th>order</th>
      <th>family</th>
      <th>genus</th>
      <th>oxygenstat</th>
      <th>metabolism</th>
      <th>...</th>
      <th>draftcreated</th>
      <th>phenotype</th>
      <th>imgid</th>
      <th>ncbiid</th>
      <th>platform</th>
      <th>kbaseid</th>
      <th>species</th>
      <th>file</th>
      <th>id</th>
      <th>taxa_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Abiotrophia defectiva ATCC 49176</td>
      <td>Abiotrophia defectiva ATCC 49176 (592010.4)</td>
      <td>Bacteria</td>
      <td>Firmicutes</td>
      <td>Bacilli</td>
      <td>Lactobacillales</td>
      <td>Aerococcaceae</td>
      <td>Abiotrophia</td>
      <td>Facultative anaerobe</td>
      <td>Saccharolytic, fermentative or respiratory</td>
      <td>...</td>
      <td>07/01/14</td>
      <td>1.0</td>
      <td>2.562617e+09</td>
      <td>592010.0</td>
      <td>ModelSEED</td>
      <td>NaN</td>
      <td>defectiva</td>
      <td>models/Abiotrophia_defectiva_ATCC_49176.xml</td>
      <td>Abiotrophia_defectiva_ATCC_49176</td>
      <td>46125.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Achromobacter xylosoxidans A8</td>
      <td>Achromobacter xylosoxidans A8 (762376.5)</td>
      <td>Bacteria</td>
      <td>Proteobacteria</td>
      <td>Betaproteobacteria</td>
      <td>Burkholderiales</td>
      <td>Alcaligenaceae</td>
      <td>Achromobacter</td>
      <td>Aerobe</td>
      <td>Respiratory</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>762376.0</td>
      <td>ModelSEED</td>
      <td>kb_g_3268_model_gf</td>
      <td>xylosoxidans</td>
      <td>models/Achromobacter_xylosoxidans_A8.xml</td>
      <td>Achromobacter_xylosoxidans_A8</td>
      <td>85698.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Achromobacter xylosoxidans NBRC 15126 = ATCC 2...</td>
      <td>NaN</td>
      <td>Bacteria</td>
      <td>Proteobacteria</td>
      <td>Betaproteobacteria</td>
      <td>Burkholderiales</td>
      <td>Alcaligenaceae</td>
      <td>Achromobacter</td>
      <td>Aerobe</td>
      <td>Respiratory</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1216976.0</td>
      <td>Kbase</td>
      <td>kb|g.208127</td>
      <td>xylosoxidans</td>
      <td>models/Achromobacter_xylosoxidans_NBRC_15126.xml</td>
      <td>Achromobacter_xylosoxidans_NBRC_15126</td>
      <td>85698.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Acidaminococcus fermentans DSM 20731</td>
      <td>Acidaminococcus fermentans DSM 20731 (591001.3)</td>
      <td>Bacteria</td>
      <td>Firmicutes</td>
      <td>Negativicutes</td>
      <td>Acidaminococcales</td>
      <td>Acidaminococcaceae</td>
      <td>Acidaminococcus</td>
      <td>Obligate anaerobe</td>
      <td>Fermentative</td>
      <td>...</td>
      <td>04/17/16</td>
      <td>NaN</td>
      <td>6.463119e+08</td>
      <td>591001.0</td>
      <td>Kbase</td>
      <td>kb|g.2555</td>
      <td>fermentans</td>
      <td>models/Acidaminococcus_fermentans_DSM_20731.xml</td>
      <td>Acidaminococcus_fermentans_DSM_20731</td>
      <td>905.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Acidaminococcus intestini RyC-MR95</td>
      <td>Acidaminococcus intestini RyC-MR95 (568816.4)</td>
      <td>Bacteria</td>
      <td>Firmicutes</td>
      <td>Negativicutes</td>
      <td>Selenomonadales</td>
      <td>Acidaminococcaceae</td>
      <td>Acidaminococcus</td>
      <td>Obligate anaerobe</td>
      <td>Asaccharolytic, glutamate is fermented</td>
      <td>...</td>
      <td>08/03/14</td>
      <td>4.0</td>
      <td>2.511231e+09</td>
      <td>568816.0</td>
      <td>Kbase</td>
      <td>NaN</td>
      <td>intestini</td>
      <td>models/Acidaminococcus_intestini_RyC_MR95.xml</td>
      <td>Acidaminococcus_intestini_RyC_MR95</td>
      <td>187327.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 26 columns</p>
</div></div>
</div>
</section>
<section id="Saving-and-loading-communities">
<h2>Saving and loading communities<a class="headerlink" href="#Saving-and-loading-communities" title="Permalink to this headline">#</a></h2>
<p>Contructing large community models can be slow which is due to performance limitations of the solvers. In essence, adding a single variable/constraint to a model qih 10 variables is much faster than adding it to a model with 10 million variables. Thus, we recommend you save the constructed community in a serialized format afterwards which will be much faster in loading repetitively.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>%time com = Community(taxonomy)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "2a381ea543bd4803bdeb7eadd021cd2f", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

CPU times: user 756 ms, sys: 12.6 ms, total: 768 ms
Wall time: 776 ms
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>%time com.to_pickle(&quot;community.pickle&quot;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
CPU times: user 77.8 ms, sys: 3.77 ms, total: 81.6 ms
Wall time: 81.4 ms
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from micom import load_pickle
%time com = load_pickle(&quot;community.pickle&quot;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
CPU times: user 36.4 ms, sys: 7.71 ms, total: 44.1 ms
Wall time: 43.6 ms
</pre></div></div>
</div>
<p>As we can see loading the model from the pickle format is much faster than creating it <em>de novo</em>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="workflows.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Writing your own workflows</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="growth_fluxes.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Growth rates and fluxes</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Christian Diener<br/>
  
      &copy; Copyright 2017-2021, Christian Diener.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>